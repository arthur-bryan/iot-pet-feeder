version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Generating env-config.js with environment variables"
        - |
          cat > public/env-config.js << EOF
          window.ENV = {
            VITE_API_BASE_URL: "${VITE_API_BASE_URL}",
            VITE_USER_POOL_ID: "${VITE_USER_POOL_ID}",
            VITE_USER_POOL_CLIENT_ID: "${VITE_USER_POOL_CLIENT_ID}",
            VITE_REGION: "${VITE_REGION}",
            VITE_GOOGLE_CLIENT_ID: "${VITE_GOOGLE_CLIENT_ID}",
            VITE_USER_POOL_DOMAIN: "${VITE_USER_POOL_DOMAIN}"
          };
          EOF
        - cat public/env-config.js
    build:
      commands:
        - echo "No build step required for static site"
  artifacts:
    baseDirectory: /public
    files:
      - '**/*'
  cache:
    paths: []
